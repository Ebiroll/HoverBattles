<html>
	<head>
		<script src="jquery-1.5.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css"/>

		<!-- Library Includes -->
		<script src="../glMatrix-0.9.5.min.js"></script>
				
		<!-- Game Includes -->		
		<script src="../Model.js"></script>
		<script src="../Entity.js"></script>
		<script src="../Camera.js"></script>
		<script src="../Scene.js"></script>
		<script src="../RenderContext.js"></script>
		<script src="../Controller.js"></script>
		<script src="../Coordinator.js"></script>
		<script src="../Shaders.js"></script>
		<script src="../LandChunk.js"></script>

		<script type="text/javascript">
			
			$(document).ready(function(){
				var scene = new blah.Scene();
			
				var heightMap = new Array(256 * 256);
	
				for(var x = 0; x < 256 ; x++){
					for(var y = 0; y < 256; y++) {
						var height = (Math.sin(x / 32) + Math.sin(y / 32)) * 3.0;
						heightMap[x + (y * 256)] = height;			
					}
				}

				var model = new blah.LandChunk(heightMap, 256, 256, 1);
				var entity = new blah.Entity("test", model);

				scene.addEntity(entity);

				entity.position = vec3.create([0,0, 0]);
				scene.camera.setLocation([125,10,280]);

				var context = new blah.RenderContext();
				context.init('game');

				context.setActiveProgram(model.getProgram());
				model.createBuffers(context);

				// Outside forces on the scene
				var controller = new blah.Controller(scene);
				var coordinator = new blah.Coordinator(scene, controller, context);

				setInterval(function() {  coordinator.tick(); }, 1000 / 30);

			});

		</script>
	</head>
	<body>		
		<h1>GL RPG</h1>
		<p>There should be a basic white square in the middle, and using the WASD keys should result in the camera moving</p>
		<canvas id="game" style="border: none;" width="750" height="500">

		</canvas>		
	</body>
</html>
